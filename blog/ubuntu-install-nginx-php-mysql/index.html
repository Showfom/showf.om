<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><meta name="author" content="Showfom Guo"><meta name="description" content="Showfom&#39;s personal weblog"><meta name="keywords" content="blog,debian,ubuntu,linux,domain hack"><base href="https://showf.om"><title>How to Install Nginx, MySQL and PHP (LEMP Stack) on Ubuntu 16.04 / Ubuntu 14.04 · Showfom&#39;s Blog</title><link rel="canonical" href="https://showf.om/blog/ubuntu-install-nginx-php-mysql/"><style>html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}*,:after,:before{box-sizing:inherit}html{box-sizing:border-box;font-size:62.5%}body{display:flex;color:#323232;background-color:#fefefe;font-family:Ubuntu,monospace;font-size:1.6em;font-weight:400;letter-spacing:.0625em;line-height:1.8em}@media only screen and (min-device-width:320px) and (max-device-width:480px){body{font-size:1.4em;line-height:1.6em}}a{font-weight:700;color:#000;text-decoration:none}a:focus,a:hover{text-decoration:underline}p{margin:1.6rem 0 1.6rem 0}h1,h2,h3,h4,h5,h6{color:#000;text-transform:uppercase;letter-spacing:.0625em;margin:3.2rem 0 1.6rem 0}h1{font-size:3.2rem;line-height:3.2rem}@media only screen and (min-device-width:320px) and (max-device-width:480px){h1{font-size:2.8rem;line-height:2.8rem}}h2{font-size:2.8rem;line-height:2.8rem}@media only screen and (min-device-width:320px) and (max-device-width:480px){h2{font-size:2.4rem;line-height:2.4rem}}h3{font-size:2.4rem;line-height:2.4rem}@media only screen and (min-device-width:320px) and (max-device-width:480px){h3{font-size:2rem;line-height:2rem}}h4{font-size:2.2rem;line-height:2.2rem}@media only screen and (min-device-width:320px) and (max-device-width:480px){h4{font-size:1.8rem;line-height:1.8rem}}h5{font-size:2rem;line-height:2rem}@media only screen and (min-device-width:320px) and (max-device-width:480px){h5{font-size:1.6rem;line-height:1.6rem}}h6{font-size:1.4rem;line-height:1.4rem}pre{margin:1.6rem 0 1rem 0;padding:1.6rem;overflow-x:auto}code{background-color:#000;color:#fefefe;padding:.4rem .8rem .4rem .8rem}blockquote{border-left:2px solid #dcdcdc;padding-left:1.6rem;font-style:italic}img{max-width:100%}.wrapper{display:flex;flex-direction:column;min-height:100vh;width:100%}.container{margin:0 auto;max-width:120rem;width:100%;padding-left:2rem;padding-right:2rem}.navigation{height:6rem;width:100%}.navigation a{display:inline;font-size:1.6rem;text-transform:uppercase;line-height:6rem;letter-spacing:.1rem}@media only screen and (min-device-width:320px) and (max-device-width:480px){.navigation a{font-size:1.4rem}}.navigation ul{list-style:none;margin-bottom:0;margin-top:0}.navigation ul li{float:left;margin:0;position:relative}.navigation ul li a{margin-left:1rem;margin-right:1rem}.content{flex:1;margin-top:1.6rem;margin-bottom:3.2rem}.content article header{margin-top:3.2rem;margin-bottom:3.2rem}.content article header h1,.content article header h2{margin:0}.content article header h2{margin-top:1rem;font-size:1.8rem;color:#323232}@media only screen and (min-device-width:320px) and (max-device-width:480px){.content article header h2{font-size:1.6rem}}.list ul{margin:3.2rem 0 3.2rem 0;list-style:none;padding:0}.list ul li{font-size:1.6rem}@media only screen and (min-device-width:320px) and (max-device-width:480px){.list ul li{font-size:1.4rem;margin:1.6rem 0 1.6rem 0}}.list ul li span{display:inline-block;text-align:right;width:20rem;margin-right:3rem}@media only screen and (min-device-width:320px) and (max-device-width:480px){.list ul li span{display:block;text-align:left}}.list ul li a{text-transform:uppercase}.pagination{margin-top:6rem;text-align:center}.pagination li{display:inline;text-align:center}.pagination li span{margin:0;text-align:center;width:3.2rem}.pagination li a span{margin:0;text-align:center;width:3.2rem}.centered{display:flex;height:100%;align-items:center;justify-content:center}.centered .about{text-align:center}.centered .about h1{margin-top:2rem;margin-bottom:.5rem}.centered .about h2{margin-top:1rem;margin-bottom:.5rem;font-size:2.4rem}@media only screen and (min-device-width:320px) and (max-device-width:480px){.centered .about h2{font-size:2rem}}.centered .about ul{list-style:none;margin:3rem 0 1rem 0;padding:0}.centered .about ul li{display:inline;position:relative}.centered .about ul li a{text-transform:uppercase;margin-left:1rem;margin-right:1rem;font-size:1.6rem}@media only screen and (min-device-width:320px) and (max-device-width:480px){.centered .about ul li a{font-size:1.4rem}}.centered .error{text-align:center}.centered .error h1{margin-top:2rem;margin-bottom:.5rem;font-size:4.6rem}@media only screen and (min-device-width:320px) and (max-device-width:480px){.centered .error h1{font-size:3.2rem}}.centered .error h2{margin-top:2rem;margin-bottom:3.2rem;font-size:3.2rem}@media only screen and (min-device-width:320px) and (max-device-width:480px){.centered .error h2{font-size:2.8rem}}.footer{height:6rem;width:100%;text-align:center;line-height:6rem}.float-right{float:right}.float-left{float:left}.highlight code{background-color:#000;color:#fefefe;padding:0}</style><meta name="msapplication-config" content="https://cdn.loli.net/sb.sb.sb/favicon/browserconfig.xml"><meta name="apple-mobile-web-app-title" content="Showfom's Blog"><meta name="application-name" content="Showfom's Blog"><meta name="theme-color" content="#ffffff"><link rel="icon" type="image/x-icon" href="https://cdn.loli.net/sb.sb.sb/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="https://cdn.loli.net/sb.sb.sb/favicon/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://cdn.loli.net/sb.sb.sb/favicon/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://cdn.loli.net/sb.sb.sb/favicon/favicon-16x16.png"><link rel="manifest" href="https://cdn.loli.net/sb.sb.sb/favicon/manifest.json"><link rel="mask-icon" href="https://cdn.loli.net/sb.sb.sb/favicon/safari-pinned-tab.svg" color="#5bbad5"><meta name="generator" content="Hugo 0.38.2"></head><body><main class="wrapper"><nav class="navigation"><section class="container"><a class="navigation-title" href="https://showf.om/">Showfom&#39;s Blog</a><ul class="navigation-list float-right"><li class="navigation-item"><a class="navigation-link" href="https://showf.om/blog/">Blog</a></li><li class="navigation-item"><a class="navigation-link" href="https://showf.om/about/">About</a></li><li class="navigation-item"><a class="navigation-link" href="https://showf.om/contact/">Contact</a></li></ul></section></nav><div class="content"><section class="container page"><article><header><h1>How to Install Nginx, MySQL and PHP (LEMP Stack) on Ubuntu 16.04 / Ubuntu 14.04</h1></header><p>LEMP is the acronym for <a href="https://en.wikipedia.org/wiki/Linux">Linux</a> + <a href="https://nginx.org/">Nginx</a> + <a href="https://mysql.com/">MySQL</a> + <a href="https://php.net/">PHP</a>. It is also known as LNMP (which is unpronounceable, so we&rsquo;ll call it LEMP).</p><p>The following tutorial is for Ubuntu versions 16.04.x and 14.04.x. However, we would always recommend to use the latest version to avoid bugs from lower ones.</p><p>We recommend you following the instructions as the <code>root</code> user. To switch to the root user, use the command <code>sudo -i</code>.</p><h2 id="1-install-nginx-1-13-x">1. Install Nginx 1.13.x</h2><p>Because Nginx is updated frequently while Ubuntu Server has been slow on updates and the version of its preinstalled OpenSSL is too low, we suggest you use the <a href="https://launchpad.net/~ondrej/+archive/ubuntu/nginx-mainline">PPA</a> from <a href="https://deb.sury.org/">Ondřej Surý</a>.</p><p>First, add the Nginx PPA repository and install prerequisite software:</p><div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt-get install software-properties-common
sudo add-apt-repository ppa:ondrej/nginx-mainline
sudo apt-get update
sudo apt-get install curl vim wget unzip apt-transport-https lsb-release ca-certificates</code></pre></div><p>Then install Nginx:</p><div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt-get install nginx-extras</code></pre></div><h2 id="2-install-php-7-2-x-7-1-x-7-0-x-or-5-6-x">2. Install PHP 7.2.x, 7.1.x, 7.0.x, or 5.6.x</h2><p><em>At this moment, the <a href="https://php.net/">PHP</a> development team only maintains these four versions.</em></p><p>Although some older programs and plugins are obsolete in the PHP 7.x environment, its speed is <em>indeed</em> a lot faster than older versions. I&rsquo;m urging developers to gradually shift to PHP 7.x.</p><p>Similarly, because the official update of Ubuntu Server is so slow that in many cases we can&rsquo;t apply the latest security patches, we will continue to use the <a href="https://launchpad.net/~ondrej/+archive/ubuntu/php">PPA</a> repository from <a href="https://deb.sury.org/">Ondřej Surý</a>.</p><div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo add-apt-repository ppa:ondrej/php
sudo apt-get update</code></pre></div><p>If you prefer to use PHP 7.1.x, 7.0.x, or 5.6.x, you may replace the package names below with <code>php7.1-fpm</code>, <code>php7.0-fpm</code>, or <code>php5.6-fpm</code>.</p><p>After executing the script, install commonly-used PHP components, as well as <code>php7.2-fpm</code>. If you are using WordPress, these PHP packages should be sufficient for most of your needs:</p><div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">apt-get install php7.2-fpm php7.2-mysql php7.2-curl php7.2-gd php7.2-mbstring php7.2-xml php7.2-xmlrpc php7.2-zip php7.2-opcache</code></pre></div><p>If your program needs additional PHP components, use the command <code>apt-cache search php7.2*</code> to search for them.</p><p>After installation, edit the file <code>/etc/php/7.2/fpm/php.ini</code> and replace <code>;cgi.fix_pathinfo=1</code> with <code>cgi.fix_pathinfo=0</code> to avoid <a href="https://www.owasp.org/index.php/Path_Traversal">path traversal</a> attacks.</p><div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sed -i <span style="color:#0086d2">&#39;s/;cgi.fix_pathinfo=1/cgi.fix_pathinfo=0/&#39;</span> /etc/php/7.2/fpm/php.ini</code></pre></div><p>Then restart <code>php7.2-fpm</code>.</p><div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">systemctl restart php7.2-fpm</code></pre></div><h2 id="3-update-nginx-configurations">3. Update Nginx configurations</h2><p>From now on, we are assuming your domain name to be <code>example.com</code>, and IP address to be <code>192.0.2.2</code> (<a href="https://tools.ietf.org/html/rfc5737">RFC 5737</a>). Also, you should have set the A record of <code>example.com</code> to your server&rsquo;s IP address <code>192.0.2.2</code>.</p><p>Create a new file <code>/etc/nginx/conf.d/example.conf</code> and add some basic configurations. Copy these commands and paste them to the terminal:</p><div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-nginx" data-lang="nginx"><span style="color:#fb660a;font-weight:700">sudo</span> <span style="color:#0086d2">cat</span> <span style="color:#0086d2">&gt;&gt;</span> <span style="color:#0086d2">/etc/nginx/conf.d/example.conf</span> <span style="color:#0086d2">&lt;&lt;</span> <span style="color:#0086d2">EOF</span>
<span style="color:#0086d2">server</span> {
        <span style="color:#fb660a;font-weight:700">listen</span> <span style="color:#0086f7;font-weight:700">80</span>;
        <span style="color:#fb660a;font-weight:700">listen</span> <span style="color:#0086d2">[::]:80</span>;

<span style="color:#080;background-color:#0f140f;font-style:italic"># Specify the website directory; you can change it based on your own demands. We recommend placing it under the /var/www directory. 
</span><span style="color:#080;background-color:#0f140f;font-style:italic"></span>        <span style="color:#fb660a;font-weight:700">root</span> <span style="color:#0086d2">/var/www/example.com</span>;
        <span style="color:#fb660a;font-weight:700">index</span> <span style="color:#0086d2">index.php</span> <span style="color:#0086d2">index.html</span> <span style="color:#0086d2">index.htm</span>;

<span style="color:#080;background-color:#0f140f;font-style:italic"># The first domain name is the default. Replace example.com with your own domain name.
</span><span style="color:#080;background-color:#0f140f;font-style:italic"></span>        <span style="color:#fb660a;font-weight:700">server_name</span> <span style="color:#0086d2">example.com</span>;

        <span style="color:#fb660a;font-weight:700">location</span> <span style="color:#0086d2">/</span> {
            <span style="color:#fb660a;font-weight:700">try_files</span> <span style="color:#fb660a">$uri</span> <span style="color:#fb660a">$uri/</span> =<span style="color:#0086f7;font-weight:700">404</span>;
        }

<span style="color:#080;background-color:#0f140f;font-style:italic"># Turn on PHP7.2-fpm mode. If you have installed a different version of PHP, please edit php7.2-fpm.sock. 
</span><span style="color:#080;background-color:#0f140f;font-style:italic"></span>        <span style="color:#fb660a;font-weight:700">location</span> ~ <span style="color:#0086d2">\.php$</span> {
            <span style="color:#fb660a;font-weight:700">include</span> <span style="color:#0086d2">snippets/fastcgi-php.conf</span>;
            <span style="color:#fb660a;font-weight:700">fastcgi_pass</span> <span style="color:#0086d2">unix:/run/php/php7.2-fpm.sock</span>;
        }
}
<span style="color:#fb660a;font-weight:700">EOF</span></code></pre></div><p>Then restart Nginx:</p><div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo nginx -t &amp;&amp; sudo service nginx restart</code></pre></div><p>Our website directory has been set to <code>/var/www/example.com</code>, where we create the file <code>phpinfo.php</code> and insert the <code>phpinfo()</code> function.</p><div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo cat &gt;&gt; /var/www/example.com/phpinfo.php <span style="color:#0086d2">&lt;&lt; EOF
</span><span style="color:#0086d2">&lt;?php phpinfo(); ?&gt;
</span><span style="color:#0086d2">EOF</span></code></pre></div><p>Now visit <code>http://example.com/phpinfo.php</code> with your browser. If you see the classic <code>phpinfo</code> page, then the installation should be successful. If not, go back to the previous steps.</p><h2 id="4-install-mysql-5-7-x">4. Install MySQL 5.7.x</h2><p>After years of testing in the production environment, we recommend using <a href="https://www.percona.com/software/mysql-database/percona-server">Percona Server</a> instead of the native MySQL.</p><p>Download the latest .deb file according to the <a href="https://www.percona.com/doc/percona-server/5.7/installation/apt_repo.html">official tutorial</a>.</p><div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">wget https://repo.percona.com/apt/percona-release_0.1-5.<span style="color:#fb660a;font-weight:700">$(</span>lsb_release -sc<span style="color:#fb660a;font-weight:700">)</span>_all.deb
sudo dpkg -i percona-release_0.1-5.<span style="color:#fb660a;font-weight:700">$(</span>lsb_release -sc<span style="color:#fb660a;font-weight:700">)</span>_all.deb</code></pre></div><p>This will add the official repository to <code>/etc/apt/sources.list.d/percona-release.list</code>. Before installation, see if the repository has been added already.</p><p>Update system and install Percona Server 5.7:</p><div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sudo apt-get update
sudo apt-get install percona-server-server-5.7</code></pre></div><p>After successful installation, you will be asked to enter the MySQL root password twice. Please make sure to use a random password that cannot be guessed.</p><p>I have witnessed that many new users installed weak passwords for the first time, and then got compromised. Thus, I would recommend executing the following security configuration after installing MySQL.</p><div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">sudo mysql_secure_installation</code></pre></div><p>After executing the command, you will be asked to select a password strength. Typically, choose 1 or 2.</p><div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@ubuntu:~# mysql_secure_installation

Securing the MySQL server deployment.

Enter password <span style="color:#fb660a;font-weight:700">for</span> user root: 

VALIDATE PASSWORD PLUGIN can be used to test passwords
and improve security. It checks the strength of password
and allows the users to set only those passwords which are
secure enough. Would you like to setup VALIDATE PASSWORD plugin?

Press y|Y <span style="color:#fb660a;font-weight:700">for</span> Yes, any other key <span style="color:#fb660a;font-weight:700">for</span> No:y 

There are three levels of password validation policy:

LOW    Length &gt;= <span style="color:#0086f7;font-weight:700">8</span>
MEDIUM Length &gt;= <span style="color:#0086f7;font-weight:700">8</span>, numeric, mixed <span style="color:#fb660a;font-weight:700">case</span>, and special characters
STRONG Length &gt;= <span style="color:#0086f7;font-weight:700">8</span>, numeric, mixed <span style="color:#fb660a;font-weight:700">case</span>, special characters and dictionary                  file

Please enter <span style="color:#fb660a">0</span> = LOW, <span style="color:#fb660a">1</span> = MEDIUM and <span style="color:#fb660a">2</span> = STRONG: <span style="color:#0086f7;font-weight:700">2</span> 

Using existing password <span style="color:#fb660a;font-weight:700">for</span> root.

Estimated strength of the password: <span style="color:#0086f7;font-weight:700">100</span>
Change the password <span style="color:#fb660a;font-weight:700">for</span> root ? ((Press y|Y <span style="color:#fb660a;font-weight:700">for</span> Yes, any other key <span style="color:#fb660a;font-weight:700">for</span> No) : n 

By default, a MySQL installation has an anonymous user,
allowing anyone to log into MySQL without having to have
a user account created <span style="color:#fb660a;font-weight:700">for</span> them. This is intended only <span style="color:#fb660a;font-weight:700">for</span>
testing, and to make the installation go a bit smoother.
You should remove them before moving into a production
environment.

Remove anonymous users? (Press y|Y <span style="color:#fb660a;font-weight:700">for</span> Yes, any other key <span style="color:#fb660a;font-weight:700">for</span> No) : y 

Normally, root should only be allowed to connect from
<span style="color:#0086d2">&#39;localhost&#39;</span>. This ensures that someone cannot guess at
the root password from the network.

Disallow root login remotely? (Press y|Y <span style="color:#fb660a;font-weight:700">for</span> Yes, any other key <span style="color:#fb660a;font-weight:700">for</span> No) : y 
Success.

By default, MySQL comes with a database named <span style="color:#0086d2">&#39;test&#39;</span> that
anyone can access. This is also intended only <span style="color:#fb660a;font-weight:700">for</span> testing,
and should be removed before moving into a production
environment.

Remove test database and access to it? (Press y|Y <span style="color:#fb660a;font-weight:700">for</span> Yes, any other key <span style="color:#fb660a;font-weight:700">for</span> No) :y 

Reloading the privilege tables will ensure that all changes
made so far will take effect immediately.

Reload privilege tables now? (Press y|Y <span style="color:#fb660a;font-weight:700">for</span> Yes, any other key <span style="color:#fb660a;font-weight:700">for</span> No) : y </code></pre></div><p>Again, the password <strong>has</strong> to be hard to guess. There have been innumerable cases of servers being compromised due to weak passwords.</p><p>Once completing the initial security settings, we can create a database. First, use root user to log into MySQL:</p><div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql">sudo mysql -u root -p</code></pre></div><p>You will be asked to enter your password. Then, create a database named <code>example</code>:</p><div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#fb660a;font-weight:700">CREATE</span> <span style="color:#fb660a;font-weight:700">DATABASE</span> example <span style="color:#fb660a;font-weight:700">DEFAULT</span> <span style="color:#fb660a;font-weight:700">CHARACTER</span> <span style="color:#cdcaa9;font-weight:700">SET</span> utf8mb4 <span style="color:#fb660a;font-weight:700">COLLATE</span> utf8mb4_unicode_ci;</code></pre></div><p>Because of the popularity of mobile devices, we should use <code>utf8mb4</code> in lieu of <code>utf-8</code> encoding, so that we can store emojis in the MySQL database like this: 🌚🌚🌚🌚🌚🌚</p><p>Then we can create a user named <code>example_user</code>. Use a strong password and grant user <code>example_database</code> privileges.</p><div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#fb660a;font-weight:700">GRANT</span> <span style="color:#fb660a;font-weight:700">ALL</span> <span style="color:#fb660a;font-weight:700">ON</span> example.* <span style="color:#fb660a;font-weight:700">TO</span> <span style="color:#0086d2">&#39;example_user&#39;</span>@<span style="color:#0086d2">&#39;localhost&#39;</span> IDENTIFIED <span style="color:#fb660a;font-weight:700">BY</span> <span style="color:#0086d2">&#39;Your strong password&#39;</span>;</code></pre></div><p>The terminal will display <code>Query OK, 0 rows affected, 1 warning (0.00 sec)</code>. Ignore this.</p><p>Flush privileges.</p><div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#fb660a;font-weight:700">FLUSH</span> PRIVILEGES;</code></pre></div><p>Exit if there&rsquo;s no problem.</p><div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-mysql" data-lang="mysql"><span style="color:#fb660a;font-weight:700">EXIT</span>;</code></pre></div><p>Now we can test the database. Create file <a href="https://gist.github.com/chales/11359952">mysql-test.php</a> under the directory of <code>/var/www/example.com</code>.</p><div class="highlight"><pre style="color:#fff;background-color:#111;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php">sudo cat &gt;&gt; /var/www/example.com/mysql-test.php &lt;&lt; <span style="color:#fb660a;font-weight:700">EOF</span>  
<span style="color:#ff0007;background-color:#0f140f;font-weight:700;font-style:italic">&lt;?php</span>  
\<span style="color:#fb660a">$dbname</span> = <span style="color:#0086d2">&#39;example&#39;</span>;    <span style="color:#080;background-color:#0f140f;font-style:italic">//MySQL database name
</span><span style="color:#080;background-color:#0f140f;font-style:italic"></span>\<span style="color:#fb660a">$dbuser</span> = <span style="color:#0086d2">&#39;example_user&#39;</span>;   <span style="color:#080;background-color:#0f140f;font-style:italic">//MySQL username
</span><span style="color:#080;background-color:#0f140f;font-style:italic"></span>\<span style="color:#fb660a">$dbpass</span> = <span style="color:#0086d2">&#39;Your strong password&#39;</span>;
\<span style="color:#fb660a">$dbhost</span> = <span style="color:#0086d2">&#39;localhost&#39;</span>;  <span style="color:#080;background-color:#0f140f;font-style:italic">//use localhost if you&#39;re installing locally
</span><span style="color:#080;background-color:#0f140f;font-style:italic"></span>\<span style="color:#fb660a">$link</span> = mysqli_connect(\<span style="color:#fb660a">$dbhost</span>, \<span style="color:#fb660a">$dbuser</span>, \<span style="color:#fb660a">$dbpass</span>) <span style="color:#fb660a;font-weight:700">or</span> <span style="color:#fb660a;font-weight:700">die</span>(<span style="color:#0086d2">&#34;Unable to Connect to &#39;</span><span style="color:#0086d2">\$</span><span style="color:#0086d2">dbhost&#39;&#34;</span>);
mysqli_select_db(\<span style="color:#fb660a">$link</span>, \<span style="color:#fb660a">$dbname</span>) <span style="color:#fb660a;font-weight:700">or</span> <span style="color:#fb660a;font-weight:700">die</span>(<span style="color:#0086d2">&#34;Could not open the db &#39;</span><span style="color:#0086d2">\$</span><span style="color:#0086d2">dbname&#39;&#34;</span>);  
\<span style="color:#fb660a">$test_query</span> = <span style="color:#0086d2">&#34;SHOW TABLES FROM </span><span style="color:#0086d2">\$</span><span style="color:#0086d2">dbname&#34;</span>;
\<span style="color:#fb660a">$result</span> = mysqli_query(\<span style="color:#fb660a">$link</span>, \<span style="color:#fb660a">$test_query</span>);
\<span style="color:#fb660a">$tblCnt</span> = <span style="color:#0086f7;font-weight:700">0</span>;
<span style="color:#fb660a;font-weight:700">while</span>(\<span style="color:#fb660a">$tbl</span> = mysqli_fetch_array(\<span style="color:#fb660a">$result</span>)) {  
  \<span style="color:#fb660a">$tblCnt</span>++;
  <span style="color:#080;background-color:#0f140f;font-style:italic">#echo \$tbl[0].&#34;&amp;lt;br /&amp;gt;\n&#34;;
</span><span style="color:#080;background-color:#0f140f;font-style:italic"></span>}
<span style="color:#fb660a;font-weight:700">if</span> (!\<span style="color:#fb660a">$tblCnt</span>) {  
  <span style="color:#fb660a;font-weight:700">echo</span> <span style="color:#0086d2">&#34;MySQL is working fine. There are no tables.&#34;</span>;
} <span style="color:#fb660a;font-weight:700">else</span> {
  <span style="color:#fb660a;font-weight:700">echo</span> <span style="color:#0086d2">&#34;MySQL is working fine. There are </span><span style="color:#0086d2">\$</span><span style="color:#0086d2">tblCnt tables.&#34;</span>;
}
<span style="color:#ff0007;background-color:#0f140f;font-weight:700;font-style:italic">?&gt;</span>
<span style="color:#ff0086;font-weight:700">EOF</span>
</code></pre></div><p>Once the file is created, visit <code>http://example.com/mysql-test.php</code>. If the text <code>MySQL is working fine. There are no tables.</code> shows up, then your MySQL should be working properly.</p><p>With LEMP on your Ubuntu server, you&rsquo;re all set! If you have any question, please comment below to join the discussion.</p></article></section></div><footer class="footer"><section class="container">© 2018 · Powered by <a href="https://gohugo.io/">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/">Coder</a>.</section></footer></main></body></html>